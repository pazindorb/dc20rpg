{
  "name": "Pact Weapon",
  "type": "feature",
  "img": "icons/magic/death/weapon-sword-skull-purple.webp",
  "system": {
    "description": "<p>You can choose a Weapon in your possession and bond with it, making it your Pact Weapon.</p><p>You can only have <strong>1 Pact Weapon</strong> at a time. If the Weapon has the Ammo property, it manifests its own Ammo when you load it, which immediately vanishes once the Attack is resolved.</p><p>You gain the following benefits while wielding the Weapon:</p><ul><li><p><strong>Weapon Mastery:</strong> You’re considered to have Mastery with your Pact Weapon.</p></li><li><p><strong>Maneuvers:</strong> You gain access to <strong>Attack</strong> <strong>Maneuvers</strong>, and learn 2 additional <strong>Save</strong> <strong>Maneuvers</strong> of your choice.</p></li><li><p><strong>Weapon Style:</strong> While wielding your Pact Weapon, you benefit from that <strong>Weapon</strong> <strong>Style</strong>.</p></li></ul><p><strong>Pocket Dimension:</strong> Using a <strong>Minor</strong> <strong>Action</strong>, you can dismiss the Weapon into a pocket dimension, summon it from that pocket dimension, or summon it from anywhere on the same plane of existence. If you don’t have a free hand when you summon it, or you choose not to grab it, it appears at your feet in your Space.</p><p><strong>New Pact Weapon:</strong> Over the course of a <strong>Quick</strong> <strong>Rest</strong>, you can touch a Weapon in your possession, bond with it, and make it your new Pact Weapon, ending your bond with your previous Pact Weapon.</p><p></p><p><em><strong>System Tip:</strong> Toggle this when you are wearing your Pact Armor.</em></p>",
    "tableName": "",
    "source": "",
    "conditional": {
      "hasConditional": false,
      "condition": "",
      "bonus": 0,
      "useFor": "",
      "name": ""
    },
    "isReaction": false,
    "actionType": "",
    "attackFormula": {
      "checkType": "attack",
      "targetDefence": "physical",
      "rollBonus": 0,
      "combatMastery": true,
      "critThreshold": 20,
      "formulaMod": "",
      "halfDmgOnMiss": false
    },
    "duration": {
      "value": null,
      "type": "",
      "timeUnit": ""
    },
    "range": {
      "normal": null,
      "max": null,
      "unit": ""
    },
    "target": {
      "count": null,
      "invidual": true,
      "type": "",
      "areas": {
        "default": {
          "area": "",
          "distance": null,
          "width": null,
          "unit": ""
        }
      }
    },
    "check": {
      "canCrit": false,
      "checkKey": "att",
      "contestedKey": "phy",
      "checkDC": 10
    },
    "formulas": {},
    "enhancements": {},
    "copyEnhancements": {
      "copy": false,
      "copyFor": ""
    },
    "save": {
      "type": "phy",
      "dc": null,
      "calculationKey": "spell",
      "addMastery": false
    },
    "costs": {
      "resources": {
        "actionPoint": null,
        "stamina": null,
        "mana": null,
        "health": null,
        "custom": {}
      },
      "charges": {
        "current": null,
        "max": null,
        "maxChargesFormula": "",
        "overriden": false,
        "rechargeFormula": "",
        "reset": "",
        "showAsResource": false
      },
      "otherItem": {
        "itemId": "",
        "amountConsumed": 0,
        "consumeCharge": true
      }
    },
    "featureType": "class",
    "featureOrigin": "Warlock 1",
    "usesWeapon": {
      "weaponId": "",
      "weaponAttack": false
    },
    "effectsConfig": {
      "toggleable": true,
      "active": false,
      "addToChat": false
    },
    "isResource": false,
    "resource": {
      "name": "",
      "resourceKey": "key",
      "reset": "",
      "values": [
        0,
        0,
        0,
        0,
        0,
        0,
        0,
        0,
        0,
        0,
        0,
        0,
        0,
        0,
        0,
        0,
        0,
        0,
        0,
        0
      ]
    },
    "hasAdvancement": true,
    "advancements": {
      "default": {
        "name": "Pact Weapon",
        "mustChoose": true,
        "pointAmount": 2,
        "items": {
          "qrkBxXBYqdsd7rUt": {
            "uuid": "Compendium.dc20rpg.techniques.Item.qrkBxXBYqdsd7rUt",
            "createdItemId": "",
            "selected": true,
            "pointValue": 0,
            "mandatory": true,
            "canBeCounted": true,
            "ignoreKnown": true,
            "img": "icons/skills/melee/strike-polearm-glowing-white.webp",
            "name": "Extend Attack"
          },
          "UZMUmBv5E3RQGFlx": {
            "uuid": "Compendium.dc20rpg.techniques.Item.UZMUmBv5E3RQGFlx",
            "createdItemId": "",
            "selected": true,
            "pointValue": 0,
            "mandatory": true,
            "canBeCounted": true,
            "ignoreKnown": true,
            "img": "icons/skills/melee/strike-axe-energy-pink.webp",
            "name": "Power Attack"
          },
          "2iRK0FdWRvCPH44g": {
            "uuid": "Compendium.dc20rpg.techniques.Item.2iRK0FdWRvCPH44g",
            "createdItemId": "",
            "selected": true,
            "pointValue": 0,
            "mandatory": true,
            "canBeCounted": true,
            "ignoreKnown": true,
            "img": "icons/skills/melee/strikes-sword-scimitar.webp",
            "name": "Sweep Attack"
          },
          "6JGmfeR778ZnMQox": {
            "uuid": "Compendium.dc20rpg.techniques.Item.6JGmfeR778ZnMQox",
            "createdItemId": "",
            "selected": false,
            "pointValue": 1,
            "mandatory": false,
            "canBeCounted": true,
            "ignoreKnown": true,
            "img": "icons/skills/melee/blade-tip-chipped-blood-red.webp",
            "name": "Bleed"
          },
          "1dDDAMaCCYzWlN8Z": {
            "uuid": "Compendium.dc20rpg.techniques.Item.1dDDAMaCCYzWlN8Z",
            "createdItemId": "",
            "selected": false,
            "pointValue": 1,
            "mandatory": false,
            "canBeCounted": true,
            "ignoreKnown": true,
            "img": "icons/skills/melee/hand-grip-staff-yellow-brown.webp",
            "name": "Daze"
          },
          "2q82GqvMW0gQGV8b": {
            "uuid": "Compendium.dc20rpg.techniques.Item.2q82GqvMW0gQGV8b",
            "createdItemId": "",
            "selected": false,
            "pointValue": 1,
            "mandatory": false,
            "canBeCounted": true,
            "ignoreKnown": true,
            "img": "icons/skills/wounds/injury-pain-body-orange.webp",
            "name": "Expose"
          },
          "fRbmA5K5nq7WsDUm": {
            "uuid": "Compendium.dc20rpg.techniques.Item.fRbmA5K5nq7WsDUm",
            "createdItemId": "",
            "selected": false,
            "pointValue": 1,
            "mandatory": false,
            "canBeCounted": true,
            "ignoreKnown": true,
            "img": "icons/skills/movement/feet-bladed-boots-fire.webp",
            "name": "Hamstring"
          },
          "zvAqOOvrET9dFohd": {
            "uuid": "Compendium.dc20rpg.techniques.Item.zvAqOOvrET9dFohd",
            "createdItemId": "",
            "selected": false,
            "pointValue": 1,
            "mandatory": false,
            "canBeCounted": true,
            "ignoreKnown": true,
            "img": "icons/creatures/webs/web-spider-caught-hand-purple.webp",
            "name": "Hinder"
          },
          "tqloff6C4kcnCwWW": {
            "uuid": "Compendium.dc20rpg.techniques.Item.tqloff6C4kcnCwWW",
            "createdItemId": "",
            "selected": false,
            "pointValue": 1,
            "mandatory": false,
            "canBeCounted": true,
            "ignoreKnown": true,
            "img": "icons/skills/wounds/bone-broken-knee-beam.webp",
            "name": "Impair"
          },
          "NgloMGfO2NPkqGfz": {
            "uuid": "Compendium.dc20rpg.techniques.Item.NgloMGfO2NPkqGfz",
            "createdItemId": "",
            "selected": false,
            "pointValue": 1,
            "mandatory": false,
            "canBeCounted": true,
            "ignoreKnown": true,
            "img": "icons/magic/control/voodoo-doll-pain-damage-red.webp",
            "name": "Knockback"
          },
          "KhT1JqAPMubuzEs9": {
            "uuid": "Compendium.dc20rpg.techniques.Item.KhT1JqAPMubuzEs9",
            "createdItemId": "",
            "selected": false,
            "pointValue": 1,
            "mandatory": false,
            "canBeCounted": true,
            "ignoreKnown": true,
            "img": "icons/magic/control/silhouette-fall-slip-prone.webp",
            "name": "Trip"
          }
        },
        "customTitle": "Pact Weapon - Maneuvers"
      }
    },
    "macros": {
      "onDemandMacroTitle": "Change Your Pact Weapon",
      "onDemand": "const weapons = actor.getWeapons();\nconst weaponId = await game.dc20rpg.tools.getSimplePopup(\"select\", {header: \"Select Your Pact Weapon\", selectOptions: weapons});\nconst weapon = actor.items.get(weaponId);\nif (weapon) {\n  const code = `; const pact = actor.items.get(\"${item._id}\"); if (pact) {pact.update({['system.toggle.toggledOn']: on})}`;\n\n  // Remove macro from old Pact Weapon\n  const oldWeapon = actor.items.get(item.flags.dc20rpg.pactWeaponId);\n  if (oldWeapon) {\n    let macroToUpdate =  oldWeapon.system.macros.onItemToggle;\n    macroToUpdate = macroToUpdate.replace(code, \"\");\n    oldWeapon.update({[\"system.macros.onItemToggle\"]: macroToUpdate});\n  }\n\n  // Add macro to new Pact Weapon\n  const onItemToggle = weapon.system.macros.onItemToggle;\n  weapon.update({[\"system.macros.onItemToggle\"]: onItemToggle + code})\n  item.update({[\"flags.dc20rpg.pactWeaponId\"]: weaponId});\n}",
      "onCreate": "const weapons = actor.getWeapons();\nconst weaponId = await game.dc20rpg.tools.getSimplePopup(\"select\", {header: \"Select Your Pact Weapon\", selectOptions: weapons});\nconst weapon = actor.items.get(weaponId);\nif (weapon) {\n  const code = `; const pact = actor.items.get(\"${item._id}\"); if (pact) {pact.update({['system.toggle.toggledOn']: on})}`;\n\n  // Remove macro from old Pact Weapon\n  const oldWeapon = actor.items.get(item.flags.dc20rpg.pactWeaponId);\n  if (oldWeapon) {\n    let macroToUpdate =  oldWeapon.system.macros.onItemToggle;\n    macroToUpdate = macroToUpdate.replace(code, \"\");\n    oldWeapon.update({[\"system.macros.onItemToggle\"]: macroToUpdate});\n  }\n\n  // Add macro to new Pact Weapon\n  const onItemToggle = weapon.system.macros.onItemToggle;\n  weapon.update({[\"system.macros.onItemToggle\"]: onItemToggle + code})\n  item.update({[\"flags.dc20rpg.pactWeaponId\"]: weaponId});\n}",
      "preDelete": "const code = `; const pact = actor.items.get(\"${item._id}\"); if (pact) {pact.update({['system.toggle.toggledOn']: on})}`;\n// Remove macro from old Pact Weapon\nconst oldWeapon = actor.items.get(item.flags.dc20rpg.pactWeaponId);\nif (oldWeapon) {\n  let macroToUpdate =  oldWeapon.system.macros.onItemToggle;\n  macroToUpdate = macroToUpdate.replace(code, \"\");\n  oldWeapon.update({[\"system.macros.onItemToggle\"]: macroToUpdate});\n}"
    }
  },
  "effects": [
    {
      "origin": "Item.p4FMBZcxE7zSXlrF",
      "duration": {
        "rounds": 1,
        "startTime": null,
        "seconds": null,
        "combat": null,
        "turns": null,
        "startRound": null,
        "startTurn": null
      },
      "disabled": false,
      "name": "Pact Weapon",
      "img": "icons/magic/death/weapon-sword-skull-purple.webp",
      "_id": "1PXmFYaVHGv5Zmdu",
      "type": "base",
      "system": {
        "statusId": ""
      },
      "changes": [
        {
          "key": "system.masteries.weapons",
          "mode": 5,
          "value": "true",
          "priority": null
        },
        {
          "key": "system.masteries.weaponStyles",
          "mode": 5,
          "value": "true",
          "priority": null
        }
      ],
      "description": "<p><span style=\"font-family:'Trebuchet MS', 'Lucida Sans Unicode', 'Lucida Grande', 'Lucida Sans', Arial, sans-serif\">You gain the following benefits while wielding the Pact Weapon:</span></p><ul style=\"box-sizing:border-box;user-select:text;scrollbar-width:thin;scrollbar-color:var(--color-scrollbar) var(--color-scrollbar-track);margin:0.5em 0px;padding:0px 0px 0px 1.5em;color:rgb(25, 24, 19);font-family:'Trebuchet MS', 'Lucida Sans Unicode', 'Lucida Grande', 'Lucida Sans', Arial, sans-serif;font-size:14px;font-style:normal;font-variant-ligatures:normal;font-variant-caps:normal;font-weight:400;letter-spacing:normal;orphans:2;text-align:start;text-indent:0px;text-transform:none;widows:2;word-spacing:0px;-webkit-text-stroke-width:0px;white-space:normal;text-decoration-thickness:initial;text-decoration-style:initial;text-decoration-color:initial\"><li style=\"box-sizing:border-box;user-select:text;scrollbar-width:thin;scrollbar-color:var(--color-scrollbar) var(--color-scrollbar-track)\"><p style=\"box-sizing:border-box;user-select:text;scrollbar-width:thin;scrollbar-color:var(--color-scrollbar) var(--color-scrollbar-track);margin:0.5em 0px\"><span style=\"font-family:'Trebuchet MS', 'Lucida Sans Unicode', 'Lucida Grande', 'Lucida Sans', Arial, sans-serif\"><strong style=\"box-sizing:border-box;user-select:text;scrollbar-width:thin;scrollbar-color:var(--color-scrollbar) var(--color-scrollbar-track)\">Weapon Mastery:</strong> You’re considered to have Mastery with your Pact Weapon.</span></p></li><li style=\"box-sizing:border-box;user-select:text;scrollbar-width:thin;scrollbar-color:var(--color-scrollbar) var(--color-scrollbar-track)\"><p style=\"box-sizing:border-box;user-select:text;scrollbar-width:thin;scrollbar-color:var(--color-scrollbar) var(--color-scrollbar-track);margin:0.5em 0px\"><span style=\"font-family:'Trebuchet MS', 'Lucida Sans Unicode', 'Lucida Grande', 'Lucida Sans', Arial, sans-serif\"><strong style=\"box-sizing:border-box;user-select:text;scrollbar-width:thin;scrollbar-color:var(--color-scrollbar) var(--color-scrollbar-track)\">Maneuvers:</strong> You gain access to <strong style=\"box-sizing:border-box;user-select:text;scrollbar-width:thin;scrollbar-color:var(--color-scrollbar) var(--color-scrollbar-track)\">Attack</strong> <strong style=\"box-sizing:border-box;user-select:text;scrollbar-width:thin;scrollbar-color:var(--color-scrollbar) var(--color-scrollbar-track)\">Maneuvers</strong>, and learn 2 additional <strong style=\"box-sizing:border-box;user-select:text;scrollbar-width:thin;scrollbar-color:var(--color-scrollbar) var(--color-scrollbar-track)\">Save</strong> <strong style=\"box-sizing:border-box;user-select:text;scrollbar-width:thin;scrollbar-color:var(--color-scrollbar) var(--color-scrollbar-track)\">Maneuvers</strong> of your choice.</span></p></li><li style=\"box-sizing:border-box;user-select:text;scrollbar-width:thin;scrollbar-color:var(--color-scrollbar) var(--color-scrollbar-track)\"><p style=\"box-sizing:border-box;user-select:text;scrollbar-width:thin;scrollbar-color:var(--color-scrollbar) var(--color-scrollbar-track);margin:0.5em 0px\"><span style=\"font-family:'Trebuchet MS', 'Lucida Sans Unicode', 'Lucida Grande', 'Lucida Sans', Arial, sans-serif\"><strong style=\"box-sizing:border-box;user-select:text;scrollbar-width:thin;scrollbar-color:var(--color-scrollbar) var(--color-scrollbar-track)\">Weapon Style:</strong> While wielding your Pact Weapon, you benefit from that <strong style=\"box-sizing:border-box;user-select:text;scrollbar-width:thin;scrollbar-color:var(--color-scrollbar) var(--color-scrollbar-track)\">Weapon</strong> <strong style=\"box-sizing:border-box;user-select:text;scrollbar-width:thin;scrollbar-color:var(--color-scrollbar) var(--color-scrollbar-track)\">Style</strong>.</span></p></li></ul>",
      "tint": "#ffffff",
      "transfer": true,
      "statuses": [],
      "sort": 0,
      "flags": {
        "dc20rpg": {
          "disableWhen": {
            "path": "",
            "mode": "==",
            "value": ""
          },
          "requireEnhancement": ""
        }
      },
      "_stats": {
        "compendiumSource": null,
        "duplicateSource": null,
        "coreVersion": "12.331",
        "systemId": "dc20rpg",
        "systemVersion": "0.8.3",
        "createdTime": null,
        "modifiedTime": 1734530481589,
        "lastModifiedBy": "dOcXwrUs2VunZl0y"
      },
      "_key": "!items.effects!p4FMBZcxE7zSXlrF.1PXmFYaVHGv5Zmdu"
    }
  ],
  "folder": "SDifcOAGjLwfwVrX",
  "sort": 100000,
  "ownership": {
    "default": 0,
    "dOcXwrUs2VunZl0y": 3
  },
  "flags": {},
  "_stats": {
    "compendiumSource": "Item.Wv27tsVKxw22UNus",
    "duplicateSource": "Item.FrnunggAG6Nc5exW",
    "coreVersion": "12.331",
    "systemId": "dc20rpg",
    "systemVersion": "0.8.3",
    "createdTime": 1720185176005,
    "modifiedTime": 1734530636603,
    "lastModifiedBy": "dOcXwrUs2VunZl0y"
  },
  "_id": "p4FMBZcxE7zSXlrF",
  "_key": "!items!p4FMBZcxE7zSXlrF"
}
