{
  "name": "Pact Weapon",
  "type": "feature",
  "img": "icons/magic/death/weapon-sword-skull-purple.webp",
  "system": {
    "description": "<p>You can choose a Weapon in your possession and bond with it, making it your Pact Weapon.</p><p>You can only have <strong>1 Pact Weapon</strong> at a time. If the Weapon has the Ammo property, it manifests its own Ammo when you load it, which immediately vanishes once the Attack is resolved.</p><p>You gain the following benefits while wielding the Weapon:</p><ul><li><p><span class=\"cf0\"><strong>Weapon Training:</strong> You’re considered to have Combat Training with your Pact Weapon.</span></p><p class=\"pf0\"><span class=\"cf0\"><em><strong>DC Tip:</strong> Remember, Combat Training with a Weapon allows you to use Martial Enhancements on Attacks with it, including the one related to its Weapon’s Style.</em></span></p></li><li><p><strong>Maneuvers:</strong> <span class=\"cf0\">You learn 2 Attack Maneuvers of your choice.</span>.</p></li><li><p><strong>Spell Focus: </strong><span class=\"cf0\">Your Pact Weapon also counts as a Spell Focus with a 1 point Focus Property. If the Weapon has the Two-Handed Weapon Property, it instead has two 1 point Focus Properties or a 2 point Focus Property (your choice). You can change the chosen Focus Properties when you complete a Quick Rest.</span></p><p><em><strong>System Tip:</strong> Just use Spell Focus item to gain benefits of this benefit.</em></p></li></ul><p><strong>Pocket Dimension:</strong> Using a <strong>Minor</strong> <strong>Action</strong>, you can dismiss the Weapon into a pocket dimension, summon it from that pocket dimension, or summon it from anywhere on the same plane of existence. If you don’t have a free hand when you summon it, or you choose not to grab it, it appears at your feet in your Space.</p><p><strong>New Pact Weapon:</strong> Over the course of a <strong>Quick</strong> <strong>Rest</strong>, you can touch a Weapon in your possession, bond with it, and make it your new Pact Weapon, ending your bond with your previous Pact Weapon.</p><p><em><strong>System Tip:</strong> You can change it with On Demand Macro.</em></p>",
    "tableName": "",
    "source": "",
    "conditional": {
      "hasConditional": false,
      "condition": "",
      "bonus": "0",
      "useFor": "",
      "name": "",
      "linkWithToggle": false,
      "flags": {
        "ignorePdr": false,
        "ignoreMdr": false,
        "ignoreResistance": {},
        "ignoreImmune": {}
      },
      "effect": null
    },
    "isReaction": false,
    "actionType": "",
    "attackFormula": {
      "checkType": "attack",
      "targetDefence": "precision",
      "rollBonus": 0,
      "combatMastery": true,
      "critThreshold": 20,
      "formulaMod": "",
      "halfDmgOnMiss": false,
      "rangeType": "melee"
    },
    "duration": {
      "value": null,
      "type": "",
      "timeUnit": ""
    },
    "range": {
      "normal": null,
      "max": null,
      "unit": "",
      "melee": 1
    },
    "target": {
      "count": null,
      "invidual": true,
      "type": "",
      "areas": {
        "default": {
          "area": "",
          "distance": null,
          "width": null,
          "unit": "",
          "difficult": ""
        }
      }
    },
    "check": {
      "canCrit": false,
      "checkKey": "att",
      "contestedKey": "phy",
      "checkDC": 10,
      "multiCheck": {
        "active": false,
        "options": {}
      },
      "againstDC": true,
      "respectSizeRules": false,
      "failEffect": ""
    },
    "formulas": {},
    "enhancements": {},
    "copyEnhancements": {
      "copy": false,
      "copyFor": "",
      "linkWithToggle": false,
      "hideFromRollMenu": false
    },
    "save": {
      "type": "phy",
      "dc": null,
      "calculationKey": "spell",
      "addMastery": false,
      "failEffect": ""
    },
    "costs": {
      "resources": {
        "actionPoint": null,
        "stamina": null,
        "mana": null,
        "health": null,
        "custom": {},
        "grit": null,
        "restPoints": null
      },
      "charges": {
        "current": null,
        "max": null,
        "maxChargesFormula": "",
        "overriden": false,
        "rechargeFormula": "",
        "reset": "",
        "showAsResource": false,
        "rechargeDice": "",
        "requiredTotalMinimum": null,
        "subtract": 1
      },
      "otherItem": {
        "itemId": "",
        "amountConsumed": 0,
        "consumeCharge": true
      }
    },
    "featureType": "inner",
    "featureOrigin": "Pact Boon",
    "usesWeapon": {
      "weaponId": "",
      "weaponAttack": false
    },
    "effectsConfig": {
      "active": false,
      "addToChat": false,
      "linkWithToggle": true,
      "toggleItem": true
    },
    "isResource": false,
    "resource": {
      "name": "",
      "resourceKey": "key",
      "reset": "",
      "values": [
        0,
        0,
        0,
        0,
        0,
        0,
        0,
        0,
        0,
        0,
        0,
        0,
        0,
        0,
        0,
        0,
        0,
        0,
        0,
        0
      ],
      "useStandardTable": true,
      "customMaxFormula": ""
    },
    "hasAdvancement": true,
    "advancements": {
      "default": {
        "name": "Pact Weapon",
        "mustChoose": false,
        "pointAmount": 2,
        "items": {},
        "customTitle": "Pact Weapon - Maneuvers",
        "allowToAddItems": true,
        "addItemsOptions": {
          "itemLimit": 2,
          "itemType": "maneuver",
          "preFilters": "{\"maneuverType\": \"attack\"}",
          "helpText": "Add Attack Maneuver"
        },
        "key": "default",
        "macro": "const maneuvers = Object.values(advancement.items);\nfor (const maneuver of maneuvers) {\n  const item = actor.items.get(maneuver.createdItemId);\n  if (item) await item.update({[\"system.knownLimit\"]: false});\n}"
      }
    },
    "macros": {
      "uOYP4gvcJpumln1h": {
        "name": "Change Pact Weapon",
        "trigger": "onDemand",
        "command": "const weapons = actor.getAllItemsWithType([\"weapon\"]);\nconst selectOptions = DC20.tools.toSelectOptions(weapons, \"id\", \"name\");\nconst selected = await DC20.dialog.SimplePopup.select(\"Select Pact Weapon\", selectOptions);\nif (!selected) return;\n\nconst weapon = actor.items.get(selected);\nif (!weapon) return;\n\n// Remove training from current weapon\nconst oldWeapon = actor.items.get(item.flags?.dc20rpg?.pactWeapon);\nif (oldWeapon) {\n  oldWeapon.update({\n    [\"system.combatTraining\"]: false,\n    [\"flags.dc20rpg.-=pactItem\"]: null\n  });\n}\n\n// Add training to new weapon\nweapon.update({\n  [\"system.combatTraining\"]: true,\n  [\"flags.dc20rpg.pactItem\"]: true\n});\nitem.update({[\"flags.dc20rpg.pactWeapon\"]: weapon.id});",
        "disabled": false,
        "title": "Change Pact Weapon"
      },
      "xacpGh6lKjwkDuhl": {
        "name": "Select Pact Weapon",
        "trigger": "onCreate",
        "command": "const weapons = actor.getAllItemsWithType([\"weapon\"]);\nconst selectOptions = DC20.tools.toSelectOptions(weapons, \"id\", \"name\");\nconst selected = await DC20.dialog.SimplePopup.select(\"Select Pact Weapon\", selectOptions);\nif (!selected) return;\n\nconst weapon = actor.items.get(selected);\nif (!weapon) return;\n\n// Add training to new weapon\nweapon.update({\n  [\"system.combatTraining\"]: true,\n  [\"flags.dc20rpg.pactItem\"]: true\n});\nitem.update({[\"flags.dc20rpg.pactWeapon\"]: weapon.id});",
        "disabled": false,
        "title": ""
      },
      "tTqHv7alZgJ1NLkV": {
        "name": "Remove Pact Weapon",
        "trigger": "preDelete",
        "command": "// Remove training from current weapon\nconst oldWeapon = actor.items.get(item.flags?.dc20rpg?.pactWeapon);\nif (oldWeapon) {\n  oldWeapon.update({\n    [\"system.combatTraining\"]: false,\n    [\"flags.dc20rpg.-=pactItem\"]: null\n  });\n}",
        "disabled": false,
        "title": ""
      }
    },
    "toggle": {
      "toggleable": false,
      "toggledOn": false,
      "toggleOnRoll": false
    },
    "itemKey": "pactWeapon",
    "choicePointCost": 1,
    "hideFromCompendiumBrowser": false,
    "quickRoll": false,
    "againstEffect": {
      "id": "",
      "supressFromChatMessage": false,
      "untilYourNextTurnStart": false,
      "untilYourNextTurnEnd": false,
      "untilTargetNextTurnStart": false,
      "untilTargetNextTurnEnd": false,
      "untilFirstTimeTriggered": false
    },
    "againstStatuses": {},
    "rollRequests": {},
    "help": {
      "ignoreMHP": false,
      "subtract": false
    }
  },
  "effects": [],
  "folder": "SDifcOAGjLwfwVrX",
  "flags": {},
  "_stats": {
    "compendiumSource": null,
    "duplicateSource": null,
    "coreVersion": "13.350",
    "systemId": "dc20rpg",
    "systemVersion": "0.10.0.0",
    "createdTime": 1739350035666,
    "modifiedTime": 1768588708301,
    "lastModifiedBy": "dOcXwrUs2VunZl0y",
    "exportSource": null
  },
  "_id": "aZePJQnpb5VeqZGo",
  "sort": 0,
  "ownership": {
    "default": 0,
    "dOcXwrUs2VunZl0y": 3
  },
  "_key": "!items!aZePJQnpb5VeqZGo"
}
