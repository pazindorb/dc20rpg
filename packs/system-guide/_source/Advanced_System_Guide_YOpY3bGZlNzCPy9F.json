{
  "name": "Advanced System Guide",
  "pages": [
    {
      "sort": 400000,
      "name": "Conditional Formula",
      "type": "text",
      "_id": "HpBSKPKnETGcnmfU",
      "system": {},
      "title": {
        "show": true,
        "level": 1
      },
      "image": {},
      "text": {
        "format": 1,
        "content": "<p>Conditional Formula is a special configuration that allows you to set conditions under which you will deal additional damage/healing.</p><p>You can create one by configuring an item. Go to <span style=\"font-family:'Trebuchet MS', 'Lucida Sans Unicode', 'Lucida Grande', 'Lucida Sans', Arial, sans-serif\">Advanced tab and select \"Conditional Formula\",</span></p><p></p><h3>Conditional Formula Fields</h3><ul><li><p><strong>Displayed Name</strong> - Name shown when hovering over damage/healing calculations</p></li><li><p><strong>Bonus Formula</strong> - see Bonus Formula</p></li><li><p><strong>Use for</strong> - Requirement describing for which items the conditional should be checked (see Enhancement Copy chapter copy for, as it works exactly the same)</p></li><li><p><strong>Condition</strong> - see Condition bellow</p></li><li><p><strong>Link with item toggle</strong> - If selected, conditional will be checked only if item providing it is toggled on</p></li></ul><p></p><h3>Condition</h3><p>Condition is JavaScript code that is injected when checking the conditional, it should return true or false</p><p>Condition code has access to 3 objects that you can use in your script:</p><ul><li><p><strong>target</strong> - the target of the attack, with all its fields. Target provides two helper functions that should make it easier to use.</p><ul><li><p><em>hasAnyCondition</em> - the function takes in array of statuses, if target has at least one it returns true (see Examples bellow)</p></li><li><p><em>hasEffectWithName</em> - the function takes in name of an effect, if target has that effect it returns true (see Examples bellow)</p></li></ul></li><li><p><strong>hit</strong> - the value by which the attack roll beats the opponent's defense</p></li><li><p><strong>crit</strong> - a flag indicating whether the hit was a critical</p></li></ul><p></p><p><strong>Examples of condition:</strong></p><ul><li><p>target.system.damageReduction.pdr.value &gt; 0 - target's PDR value is bigger than 0</p></li><li><p>target.hasAnyCondition([\"dazed\", \"heavilyDazed\", \"petrified\"]) - target is dazed or petrified</p></li><li><p>target.hasEffectWithName(\"Marked\") - target has \"Marked\" effect</p></li><li><p>hit &gt;= 5 - attack beats enemy defense by 5</p></li><li><p>crit - attack is a critical hit</p></li></ul><p></p><h3>Bonus Formula</h3><p>Formula that will be added to the final damage/healing if condition is fulfilled. It can use target's rollData, see examples.</p><p></p><p><strong>Examples of bonus formula:</strong></p><ul><li><p>1 - Simply adds +1 damage/healing to the damage/healing formula</p></li><li><p>@target.system.damageReduction.pdr.value - Adds target's value of PDR to the damage/healing formula</p></li></ul><p></p><h3 data-anchor=\"event-examples\" style=\"box-sizing:border-box;user-select:text;scrollbar-width:thin;scrollbar-color:var(--color-scrollbar) var(--color-scrollbar-track);margin:1rem 0px 0.5rem;padding:0px;font-weight:normal;font-size:1.25em;border-bottom:1px solid var(--color-underline-header);color:rgb(25, 24, 19);font-family:'Trebuchet MS', 'Lucida Sans Unicode', 'Lucida Grande', 'Lucida Sans', Arial, sans-serif;font-style:normal;font-variant-ligatures:normal;font-variant-caps:normal;letter-spacing:normal;orphans:2;text-align:start;text-indent:0px;text-transform:none;widows:2;word-spacing:0px;-webkit-text-stroke-width:0px;white-space:normal;text-decoration-thickness:initial;text-decoration-style:initial;text-decoration-color:initial\"><span style=\"font-family:'Trebuchet MS', 'Lucida Sans Unicode', 'Lucida Grande', 'Lucida Sans', Arial, sans-serif\">Conditionals Examples</span></h3><p>If you want to see some examples of Conditionals use take a look at Cantrip Passives or Ork's Brutal Strikes.</p>"
      },
      "video": {
        "controls": true,
        "volume": 0.5
      },
      "src": null,
      "ownership": {
        "default": -1,
        "dOcXwrUs2VunZl0y": 3
      },
      "flags": {},
      "_stats": {
        "compendiumSource": "JournalEntry.BhYNd3oyY0t9BlHE.JournalEntryPage.HpBSKPKnETGcnmfU",
        "duplicateSource": null,
        "coreVersion": "12.331",
        "systemId": "dc20rpg",
        "systemVersion": "0.8.2",
        "createdTime": null,
        "modifiedTime": 1733921663891,
        "lastModifiedBy": "dOcXwrUs2VunZl0y"
      },
      "_key": "!journal.pages!YOpY3bGZlNzCPy9F.HpBSKPKnETGcnmfU"
    },
    {
      "sort": 0,
      "name": "Event System",
      "type": "text",
      "_id": "Fi12XntUd07lAejA",
      "system": {},
      "title": {
        "show": true,
        "level": 1
      },
      "image": {},
      "text": {
        "format": 1,
        "content": "<p>The event system allows you to use <strong>Active Effects</strong> to configure events that can be triggered at different moments of the application runtime and perform various activities.</p><ul><li><p><strong>OWNER</strong> - the actor owning the effect with the event;</p></li><li><p><strong>EFFECT</strong> - the effect that configures the event;</p></li></ul><p></p><h3>Event Types</h3><p>An event can determine the type in which it is to be launched, some of them have special options that can be set.</p><ul><li><p><strong>basic</strong> - Basic event, mainly used to run pre and post event triggers. does not have any additional options.</p></li><li><p><strong>healing -</strong> Event applying healing</p></li><li><p><strong>damage -</strong> Event applying damage</p></li><li><p><strong>checkRequest -</strong> Event that triggers a popup asking player to make a check</p></li><li><p><strong>saveRequest</strong> <strong>-</strong> Event that triggers a popup asking player to make a save</p></li></ul><p></p><h3>Event Triggers</h3><p><span style=\"font-family:Arial, sans-serif\">Event trigger describes the condition when an event should be triggered.</span></p><ul><li><p><strong>turnStart</strong> - The event will be triggered at the start of the turn of the <strong>OWNER</strong>.</p></li><li><p><strong>turnEnd</strong> - The event will be triggered at the end of the turn of the <strong>OWNER</strong>.</p></li><li><p><strong>damageTaken</strong> - The event will be triggered when the <strong>OWNER</strong> takes damage.</p></li><li><p><strong>healingTaken</strong> - The event will be triggered when the <strong>OWNER</strong> is healed.</p></li><li><p><strong>targetConfirm</strong> - The event will be triggered when the <strong>OWNER</strong> is one of the targers confirmed by the GM.</p></li><li><p><strong>move </strong>- The event will be triggered when the <strong>OWNER</strong> moves ot the scene.</p></li><li><p><strong>crit</strong> - The event will be triggered when the <strong>OWNER</strong> scores a critical success.</p></li><li><p><strong>critFail</strong> - The event will be triggered when the <strong>OWNER</strong> scores a critical fail.</p></li><li><p><strong>rollSave</strong> - The event will be triggered before the <strong>OWNER</strong> makes any save.</p></li><li><p><strong>rollCheck</strong> - The event will be triggered before the <strong>OWNER</strong> makes any check (item rolls included).</p></li><li><p><strong>attack</strong> - The event will be triggered before the <strong>OWNER</strong> makes an attack with an item.</p></li><li><p><strong>rollItem</strong> - The event will be triggered before the <strong>OWNER</strong> rolls any item.</p></li><li><p><strong>actorWithIdStartsTurn</strong> - The event will be triggered on the <strong>OWNER</strong> when actor specfied by the event start its turn (see Event Fields).</p></li><li><p><strong>actorWithIdEndsTurn</strong> - The event will be triggered on the <strong>OWNER</strong> when actor specfied by the event end its turn (see Event Fields).</p></li></ul><p></p><h3>Event Fields</h3><h4><strong>Standard Fields</strong></h4><ul><li><p><em>eventType</em> [required] - event type</p></li><li><p><em>trigger</em> [required] - event trigger</p></li><li><p><em>label</em> [required] - displayed name</p></li><li><p><em>preTrigger</em> [optional] - see PreTrigger</p></li><li><p><em>postTrigger</em> [optional] - see PostTrigger</p></li><li><p><em>reenable </em>[optional] - see Reenable</p></li></ul><p></p><h4><strong>Event Triggers specific fields</strong></h4><ul><li><p><strong>damageTaken</strong>/<strong>healingTaken</strong></p><ul><li><p><em>minimum</em> [optional] - the minimum value of damage/healing that will trigger the event</p></li></ul></li><li><p><strong>targetConfirm</strong></p><ul><li><p><em>triggerOnlyForId</em> [optional] - if specified, the confirm event will be triggered only if the actor with the given ID created chat message</p></li></ul></li><li><p><strong>actorWithIdStartsTurn/actorWithIdEndsTurn</strong></p><ul><li><p><em>actorId</em> [required] - specifies the start/end of the turn of which actor should trigger that event</p></li></ul></li></ul><p></p><h4><strong>Event Types specific fields</strong></h4><ul><li><p><strong>healing/damage</strong></p><ul><li><p><em>value </em>[required] - healing/damage amount</p></li><li><p><em>type </em>[required]<em> </em>- healing/damage type (heal, temporary, bludgeoning, piercing, slashing, fire, cold, true, etc.)</p></li></ul></li><li><p><strong>checkRequest/saveRequest</strong></p><ul><li><p><em>checkKey </em>[required] - check/save key for example: \"mig\"(Might), \"att\"(Attack), \"awa\"(Awareness) etc</p></li><li><p><em>against </em>[optional] - check/save DC (see Effect Formula Injection)</p></li><li><p><em>statuses </em>[optional] - array of statuses against which the roll is performed (used when checking roll level)</p></li><li><p><em>onSuccess</em> [optional] - choose the behavior of the effect if the request ends with success (delete/disable effect, see PostTrigger)</p></li><li><p><em>onFail</em> [optional] - choose the behavior of the effect if the request ends with failure (delete/disable effect, see PostTrigger)</p></li></ul></li></ul><p></p><h3>PreTrigger</h3><p>If the triggered event has a preTrigger configured, the <strong>OWNER</strong> will be asked if he wants to apply it.</p><p>PreTrigger has an option to configure the behavior if the <strong>OWNER</strong> decides not to use it.</p><ul><li><p><strong>disable</strong> - The <strong>EFFECT </strong>will be disabled during the roll and then turned back on.</p></li><li><p><strong>skip </strong>- The <strong>EFFECT </strong>will stay active but any event related behavior (roll requet, damage application, etc.) will be skipped.</p></li></ul><p></p><blockquote><p><em>Multiple events <strong>PreTrigger</strong> tip:</em></p><p>If you are combining two events and one of them has a preTrigger set, e.g. \"attack\" with preTrigger and \"targetConfirm\" without, you should consider adding preTrigger to the \"targetConfirm\" event as well. <br /><br />That way you will make sure that you do not remove the effect even though the player did not want to use it. The downside is that you would have to confirm this twice, once for each event.</p></blockquote><p></p><h3>PostTrigger</h3><p>PostTrigger provides an option to configure the behavior after the event was finished.</p><ul><li><p><strong>disable</strong> - The <strong>EFFECT </strong>will be disabled until it is restarted manually or by reenable condition.</p></li><li><p><strong>delete </strong>- The <strong>EFFECT </strong>will be deleted.</p></li></ul><p>If you set the postTrigger to \"disable\" you can also provide a condition on when the effect should be re-enabled</p><ul><li><p><strong>\"reenable\": \"turnStart\"</strong></p></li><li><p><strong>\"reenable\": \"turnEnd\"</strong></p></li></ul><p></p><h3>Reenable</h3><p>Reenable provides an option to configure when disabled <strong>EFFECT </strong>should be reenabled automatically</p><ul><li><p><strong>turnStart</strong> - The event will be reenabled at the start of the turn of the <strong>OWNER</strong>.</p></li><li><p><strong>turnEnd</strong> - The event will be reenabled at the end of the turn of the <strong>OWNER</strong>.</p></li><li><p><strong>actorWithIdStartsTurn</strong> - The event will be reenabled on the <strong>OWNER</strong> when actor specfied by the event start its turn (see Event Fields).</p></li><li><p><strong>actorWithIdEndsTurn</strong> - The event will be reenabled on the <strong>OWNER</strong> when actor specfied by the event end its turn (see Event Fields).</p></li></ul><p></p><h3>Event Examples</h3><p><strong>Bardic Performance - Inspiring</strong> - Temporary HP at the start of turn</p><blockquote><p><em><code>\"eventType\":\"healing\",</code></em></p><p><em><code>\"trigger\":\"turnStart\",</code></em></p><p><em><code>\"value\": 1,</code></em></p><p><em><code>\"type\": \"temporary\",</code></em></p><p><em><code>\"label\": \"Inspiring\"</code></em></p></blockquote><p></p><p><strong>Overload Magic</strong> - Save at the end of turn</p><blockquote><p><em><code>\"eventType\": \"saveRequest\",</code></em></p><p><em><code>\"label\": \"Overload Magic\",</code></em></p><p><em><code>\"trigger\": \"turnStart\",</code></em></p><p><em><code>\"checkKey\": \"prime\"</code></em></p></blockquote><p></p><p><strong>Bardic Performance - Battle Ballad </strong>- Once per turn <span style=\"font-family:'Trebuchet MS', 'Lucida Sans Unicode', 'Lucida Grande', 'Lucida Sans', Arial, sans-serif\">+1 damage against 1 target of your choice on an Attack you make. Note that this effect also has other changes besides the event. They will be disabled by pre and post trigger.</span></p><blockquote><p><em><code>\"eventType\":\"basic\",</code></em></p><p><em><code>\"trigger\":\"attack\",</code></em></p><p><em><code>\"preTrigger\":\"disable\",</code></em></p><p><em><code>\"postTrigger\":\"disable\",</code></em></p><p><em><code>\"reenable\":\"turnStart\"</code></em></p></blockquote><p></p><p><strong>Hunter's Mark</strong> - <span style=\"font-family:'Trebuchet MS', 'Lucida Sans Unicode', 'Lucida Grande', 'Lucida Sans', Arial, sans-serif\">The first Martial Attack against your target on your turn has ADV. Note that this effect also has other changes besides the event. They will be disabled by postTrigger</span> (<code>#SPEAKER_ID#</code> is explained in Effect Formula Injection chapter).</p><blockquote><p><em><code>\"eventType\": \"basic\",</code></em></p><p><em><code>\"trigger\": \"targetConfirm\",</code></em></p><p><em><code>\"postTrigger\": \"disable\",</code></em></p><p><em><code>\"reenable\": \"actorWithIdStartsTurn\",</code></em></p><p><em><code>\"actorId\": \"#SPEAKER_ID#\",</code></em></p><p><em><code>\"triggerOnlyForId\": \"#SPEAKER_ID#\"</code></em></p></blockquote>"
      },
      "video": {
        "controls": true,
        "volume": 0.5
      },
      "src": null,
      "ownership": {
        "default": -1,
        "dOcXwrUs2VunZl0y": 3
      },
      "flags": {},
      "_stats": {
        "compendiumSource": null,
        "duplicateSource": null,
        "coreVersion": "12.331",
        "systemId": "dc20rpg",
        "systemVersion": "0.8.2",
        "createdTime": null,
        "modifiedTime": 1734605557964,
        "lastModifiedBy": "dOcXwrUs2VunZl0y"
      },
      "_key": "!journal.pages!YOpY3bGZlNzCPy9F.Fi12XntUd07lAejA"
    },
    {
      "sort": 500000,
      "name": "Enhancement Copy",
      "type": "text",
      "_id": "nnY6qkLwftbAwys8",
      "system": {},
      "title": {
        "show": true,
        "level": 1
      },
      "image": {},
      "text": {
        "format": 1,
        "content": "<p>Enhancements can be copied between items, to configure this go to Roll -&gt; Enhancements tab and select the \"Copy enhancements to other items\".</p><p></p><h3 data-anchor=\"conditional-formula-fields\" style=\"box-sizing:border-box;user-select:text;scrollbar-width:thin;scrollbar-color:var(--color-scrollbar) var(--color-scrollbar-track);margin:1rem 0px 0.5rem;padding:0px;font-weight:normal;font-size:1.25em;border-bottom:1px solid var(--color-underline-header);color:rgb(25, 24, 19);font-family:'Trebuchet MS', 'Lucida Sans Unicode', 'Lucida Grande', 'Lucida Sans', Arial, sans-serif;font-style:normal;font-variant-ligatures:normal;font-variant-caps:normal;letter-spacing:normal;orphans:2;text-align:start;text-indent:0px;text-transform:none;widows:2;word-spacing:0px;-webkit-text-stroke-width:0px;white-space:normal;text-decoration-thickness:initial;text-decoration-style:initial;text-decoration-color:initial\"><span style=\"font-family:'Trebuchet MS', 'Lucida Sans Unicode', 'Lucida Grande', 'Lucida Sans', Arial, sans-serif\">Enhancement Copy</span><span style=\"font-family:'Trebuchet MS', 'Lucida Sans Unicode', 'Lucida Grande', 'Lucida Sans', Arial, sans-serif\"> Fields</span></h3><ul><li><p><strong>Copy for</strong> - R<span style=\"font-family:'Trebuchet MS', 'Lucida Sans Unicode', 'Lucida Grande', 'Lucida Sans', Arial, sans-serif\">equirement describing items enhancement should be coppied to</span></p></li><li style=\"box-sizing:border-box;user-select:text;scrollbar-width:thin;scrollbar-color:var(--color-scrollbar) var(--color-scrollbar-track)\"><p style=\"box-sizing:border-box;user-select:text;scrollbar-width:thin;scrollbar-color:var(--color-scrollbar) var(--color-scrollbar-track);margin:0.5em 0px\"><span style=\"font-family:'Trebuchet MS', 'Lucida Sans Unicode', 'Lucida Grande', 'Lucida Sans', Arial, sans-serif\"><strong style=\"box-sizing:border-box;user-select:text;scrollbar-width:thin;scrollbar-color:var(--color-scrollbar) var(--color-scrollbar-track)\">Link with item toggle</strong> - If selected, enhancement will be copied only if item providing those is toggled on</span></p></li></ul><p></p><h3>Copy for / Use for</h3><p>You need to provide requrement that describes items enhancement are coppied to. The requirement consists of two parts connected by the '=' symbol</p><ul><li><p>path to the value that should be checked</p></li><li><p>expected value</p></li></ul><p></p><p>You can use special symbols to increase the accuracy or range of a requrement:</p><ul><li><p><strong>[,] (Square brackets with values ​​separated by commas) -</strong> If any of the values ​​in the brackets are equal to the value in the path the reuirement is met</p></li><li><p><strong>'&amp;&amp;'</strong> <strong>(AND) -</strong> It combines two requirements, both must be met</p></li><li><p><strong>'||' (OR) -</strong> It combines two requirements, at least one must be met</p></li></ul><p></p><h3>Examples</h3><ul><li><p><strong>true</strong></p><ul><li><p>It will work for every item</p></li></ul></li><li><p><strong>system.weaponStyle=[\"axe\",\"sword\"]&amp;&amp;system.weaponType=\"melee\" </strong></p><ul><li><p>The item must be both a melee type and an axe or sword style</p></li></ul></li><li><p><strong>name=\"Endbreaker\" </strong></p><ul><li><p>The item name must be \"Endbringer\"</p></li></ul></li><li><p><strong>system.weaponStyle=[\"axe\",\"sword\"]&amp;&amp;system.weaponType=\"melee\"||system.weaponStyle=[\"bow\"]&amp;&amp;system.weaponType=\"ranged\" </strong></p><ul><li><p>The item must be (both a melee type and an axe or sword style) OR (both a ranged type and an bow style)</p></li></ul></li></ul>"
      },
      "video": {
        "controls": true,
        "volume": 0.5
      },
      "src": null,
      "ownership": {
        "default": -1,
        "dOcXwrUs2VunZl0y": 3
      },
      "flags": {},
      "_stats": {
        "compendiumSource": null,
        "duplicateSource": null,
        "coreVersion": "12.331",
        "systemId": "dc20rpg",
        "systemVersion": "0.8.2",
        "createdTime": null,
        "modifiedTime": 1733922289299,
        "lastModifiedBy": "dOcXwrUs2VunZl0y"
      },
      "_key": "!journal.pages!YOpY3bGZlNzCPy9F.nnY6qkLwftbAwys8"
    },
    {
      "sort": 100000,
      "name": "Roll Level System",
      "type": "text",
      "_id": "wKxuEHEETlYPwZcH",
      "system": {},
      "title": {
        "show": true,
        "level": 1
      },
      "image": {},
      "text": {
        "format": 1,
        "content": "<p>The Roll Level system allows <span style=\"font-family:'Trebuchet MS', 'Lucida Sans Unicode', 'Lucida Grande', 'Lucida Sans', Arial, sans-serif\">you to use <strong style=\"box-sizing:border-box;user-select:text;scrollbar-width:thin;scrollbar-color:var(--color-scrollbar) var(--color-scrollbar-track);color:rgb(25, 24, 19);font-family:'Trebuchet MS', 'Lucida Sans Unicode', 'Lucida Grande', 'Lucida Sans', Arial, sans-serif;font-size:14px;font-style:normal;font-variant-ligatures:normal;font-variant-caps:normal;letter-spacing:normal;orphans:2;text-align:start;text-indent:0px;text-transform:none;widows:2;word-spacing:0px;-webkit-text-stroke-width:0px;white-space:normal;text-decoration-thickness:initial;text-decoration-style:initial;text-decoration-color:initial\">Active Effects</strong></span> to configure advantage, disadvantag, automatic crit and automatic fail from specific sources (ex. Hindered, Exposed). The Roll Level configured in this way is then validated by Roll Level Check when the roll is made.</p><ul style=\"box-sizing:border-box;user-select:text;scrollbar-width:thin;scrollbar-color:var(--color-scrollbar) var(--color-scrollbar-track);margin:0.5em 0px;padding:0px 0px 0px 1.5em;color:rgb(25, 24, 19);font-family:'Trebuchet MS', 'Lucida Sans Unicode', 'Lucida Grande', 'Lucida Sans', Arial, sans-serif;font-size:14px;font-style:normal;font-variant-ligatures:normal;font-variant-caps:normal;font-weight:400;letter-spacing:normal;orphans:2;text-align:start;text-indent:0px;text-transform:none;widows:2;word-spacing:0px;-webkit-text-stroke-width:0px;white-space:normal;text-decoration-thickness:initial;text-decoration-style:initial;text-decoration-color:initial\"><li style=\"box-sizing:border-box;user-select:text;scrollbar-width:thin;scrollbar-color:var(--color-scrollbar) var(--color-scrollbar-track)\"><p style=\"box-sizing:border-box;user-select:text;scrollbar-width:thin;scrollbar-color:var(--color-scrollbar) var(--color-scrollbar-track);margin:0.5em 0px\"><span style=\"font-family:'Trebuchet MS', 'Lucida Sans Unicode', 'Lucida Grande', 'Lucida Sans', Arial, sans-serif\"><strong style=\"box-sizing:border-box;user-select:text;scrollbar-width:thin;scrollbar-color:var(--color-scrollbar) var(--color-scrollbar-track)\">OWNER</strong> - the actor owning the effect with the rollLevel;</span></p></li><li style=\"box-sizing:border-box;user-select:text;scrollbar-width:thin;scrollbar-color:var(--color-scrollbar) var(--color-scrollbar-track)\"><p style=\"box-sizing:border-box;user-select:text;scrollbar-width:thin;scrollbar-color:var(--color-scrollbar) var(--color-scrollbar-track);margin:0.5em 0px\"><span style=\"font-family:'Trebuchet MS', 'Lucida Sans Unicode', 'Lucida Grande', 'Lucida Sans', Arial, sans-serif\"><strong style=\"box-sizing:border-box;user-select:text;scrollbar-width:thin;scrollbar-color:var(--color-scrollbar) var(--color-scrollbar-track)\">EFFECT</strong> - the effect that configures the rollLevel;</span></p></li></ul><p></p><h3 data-anchor=\"event-fields\" style=\"box-sizing:border-box;user-select:text;scrollbar-width:thin;scrollbar-color:var(--color-scrollbar) var(--color-scrollbar-track);margin:1rem 0px 0.5rem;padding:0px;font-weight:normal;font-size:1.25em;border-bottom:1px solid var(--color-underline-header);color:rgb(25, 24, 19);font-family:'Trebuchet MS', 'Lucida Sans Unicode', 'Lucida Grande', 'Lucida Sans', Arial, sans-serif;font-style:normal;font-variant-ligatures:normal;font-variant-caps:normal;letter-spacing:normal;orphans:2;text-align:start;text-indent:0px;text-transform:none;widows:2;word-spacing:0px;-webkit-text-stroke-width:0px;white-space:normal;text-decoration-thickness:initial;text-decoration-style:initial;text-decoration-color:initial\"><span style=\"font-family:'Trebuchet MS', 'Lucida Sans Unicode', 'Lucida Grande', 'Lucida Sans', Arial, sans-serif\">On You vs Against You</span></h3><p>There are two main paths to setting the roll level, <strong>onYou</strong> and <strong>againstYou</strong></p><ul><li><p><strong>onYou</strong> - this value will be check if you are making that roll, ex Hindered.</p></li><li><p><strong>againstYou</strong> - this value will be check if you are the target of that roll, ex Exposed.</p></li></ul><p></p><h3 data-anchor=\"event-fields\" style=\"box-sizing:border-box;user-select:text;scrollbar-width:thin;scrollbar-color:var(--color-scrollbar) var(--color-scrollbar-track);margin:1rem 0px 0.5rem;padding:0px;font-weight:normal;font-size:1.25em;border-bottom:1px solid var(--color-underline-header);color:rgb(25, 24, 19);font-family:'Trebuchet MS', 'Lucida Sans Unicode', 'Lucida Grande', 'Lucida Sans', Arial, sans-serif;font-style:normal;font-variant-ligatures:normal;font-variant-caps:normal;letter-spacing:normal;orphans:2;text-align:start;text-indent:0px;text-transform:none;widows:2;word-spacing:0px;-webkit-text-stroke-width:0px;white-space:normal;text-decoration-thickness:initial;text-decoration-style:initial;text-decoration-color:initial\"><span style=\"font-family:'Trebuchet MS', 'Lucida Sans Unicode', 'Lucida Grande', 'Lucida Sans', Arial, sans-serif\">Roll Level Fields</span></h3><ul><li><p><em>type</em> <span style=\"font-family:'Trebuchet MS', 'Lucida Sans Unicode', 'Lucida Grande', 'Lucida Sans', Arial, sans-serif\">[required<strong>*</strong>] </span>- the key determining whether the roll level describes advantage or disadvantage</p></li><li><p><em>value</em> <span style=\"font-family:'Trebuchet MS', 'Lucida Sans Unicode', 'Lucida Grande', 'Lucida Sans', Arial, sans-serif\">[required<strong>*</strong>] </span>- advantage/disadvantage number</p></li><li style=\"box-sizing:border-box;user-select:text;scrollbar-width:thin;scrollbar-color:var(--color-scrollbar) var(--color-scrollbar-track)\"><p style=\"box-sizing:border-box;user-select:text;scrollbar-width:thin;scrollbar-color:var(--color-scrollbar) var(--color-scrollbar-track);margin:0.5em 0px\"><span style=\"font-family:'Trebuchet MS', 'Lucida Sans Unicode', 'Lucida Grande', 'Lucida Sans', Arial, sans-serif\"><em style=\"box-sizing:border-box;user-select:text;scrollbar-width:thin;scrollbar-color:var(--color-scrollbar) var(--color-scrollbar-track)\">label</em> [required] - text displayed by the \"Expected Roll Level\" window</span></p></li><li style=\"box-sizing:border-box;user-select:text;scrollbar-width:thin;scrollbar-color:var(--color-scrollbar) var(--color-scrollbar-track)\"><p><em>autoCrit</em> [optional] - if true, the roll will be a critical success</p></li><li style=\"box-sizing:border-box;user-select:text;scrollbar-width:thin;scrollbar-color:var(--color-scrollbar) var(--color-scrollbar-track)\"><p><em>autoFail</em> [optional] - if true, the roll will be a critical fail</p></li><li style=\"box-sizing:border-box;user-select:text;scrollbar-width:thin;scrollbar-color:var(--color-scrollbar) var(--color-scrollbar-track)\"><p><em>confirmation</em> [optional] - if true, the <strong>OWNER</strong> will have to confirm that he wants to use this rollLevel</p></li><li style=\"box-sizing:border-box;user-select:text;scrollbar-width:thin;scrollbar-color:var(--color-scrollbar) var(--color-scrollbar-track)\"><p><em>afterRoll </em>[optional] - <span style=\"font-family:'Trebuchet MS', 'Lucida Sans Unicode', 'Lucida Grande', 'Lucida Sans', Arial, sans-serif\">provides an option to configure the behavior of the </span><span style=\"font-family:'Trebuchet MS', 'Lucida Sans Unicode', 'Lucida Grande', 'Lucida Sans', Arial, sans-serif\"><strong style=\"box-sizing:border-box;user-select:text;scrollbar-width:thin;scrollbar-color:var(--color-scrollbar) var(--color-scrollbar-track)\">EFFECT </strong></span><span style=\"font-family:'Trebuchet MS', 'Lucida Sans Unicode', 'Lucida Grande', 'Lucida Sans', Arial, sans-serif\"> </span>after the first roll was made using it. </p><ul><li style=\"box-sizing:border-box;user-select:text;scrollbar-width:thin;scrollbar-color:var(--color-scrollbar) var(--color-scrollbar-track)\"><p style=\"box-sizing:border-box;user-select:text;scrollbar-width:thin;scrollbar-color:var(--color-scrollbar) var(--color-scrollbar-track);margin:0.5em 0px\"><span style=\"font-family:'Trebuchet MS', 'Lucida Sans Unicode', 'Lucida Grande', 'Lucida Sans', Arial, sans-serif\"><strong style=\"box-sizing:border-box;user-select:text;scrollbar-width:thin;scrollbar-color:var(--color-scrollbar) var(--color-scrollbar-track)\">disable</strong> - The <strong style=\"box-sizing:border-box;user-select:text;scrollbar-width:thin;scrollbar-color:var(--color-scrollbar) var(--color-scrollbar-track)\">EFFECT </strong>will be disabled.</span></p></li><li style=\"box-sizing:border-box;user-select:text;scrollbar-width:thin;scrollbar-color:var(--color-scrollbar) var(--color-scrollbar-track)\"><p style=\"box-sizing:border-box;user-select:text;scrollbar-width:thin;scrollbar-color:var(--color-scrollbar) var(--color-scrollbar-track);margin:0.5em 0px\"><span style=\"font-family:'Trebuchet MS', 'Lucida Sans Unicode', 'Lucida Grande', 'Lucida Sans', Arial, sans-serif\"><strong style=\"box-sizing:border-box;user-select:text;scrollbar-width:thin;scrollbar-color:var(--color-scrollbar) var(--color-scrollbar-track)\">delete </strong>- The <strong style=\"box-sizing:border-box;user-select:text;scrollbar-width:thin;scrollbar-color:var(--color-scrollbar) var(--color-scrollbar-track)\">EFFECT </strong>will be deleted.</span></p></li></ul></li><li><p><em>applyOnlyForId</em> [optional] - If provided, rollLevel will be checked only if the actor requesting the roll check has Id equal to provided one</p></li><li><p><em>skill</em> [optional] - Only for specific skill Roll Level checks</p></li></ul><p></p><p><strong>*</strong> - it is not required when you provide <em>autoCrit</em> or <em>autoFail</em> field</p><h3 data-anchor=\"event-examples\" style=\"box-sizing:border-box;user-select:text;scrollbar-width:thin;scrollbar-color:var(--color-scrollbar) var(--color-scrollbar-track);margin:1rem 0px 0.5rem;padding:0px;font-weight:normal;font-size:1.25em;border-bottom:1px solid var(--color-underline-header);color:rgb(25, 24, 19);font-family:'Trebuchet MS', 'Lucida Sans Unicode', 'Lucida Grande', 'Lucida Sans', Arial, sans-serif;font-style:normal;font-variant-ligatures:normal;font-variant-caps:normal;letter-spacing:normal;orphans:2;text-align:start;text-indent:0px;text-transform:none;widows:2;word-spacing:0px;-webkit-text-stroke-width:0px;white-space:normal;text-decoration-thickness:initial;text-decoration-style:initial;text-decoration-color:initial\"><span style=\"font-family:'Trebuchet MS', 'Lucida Sans Unicode', 'Lucida Grande', 'Lucida Sans', Arial, sans-serif\">Roll Level Examples</span></h3><p style=\"box-sizing:border-box;user-select:text;scrollbar-width:thin;scrollbar-color:var(--color-scrollbar) var(--color-scrollbar-track);margin:0.5em 0px;color:rgb(25, 24, 19);font-family:'Trebuchet MS', 'Lucida Sans Unicode', 'Lucida Grande', 'Lucida Sans', Arial, sans-serif;font-size:14px;font-style:normal;font-variant-ligatures:normal;font-variant-caps:normal;font-weight:400;letter-spacing:normal;orphans:2;text-indent:0px;text-transform:none;widows:2;word-spacing:0px;-webkit-text-stroke-width:0px;white-space:normal;text-decoration-thickness:initial;text-decoration-style:initial;text-decoration-color:initial;text-align:start\"><span style=\"font-family:'Trebuchet MS', 'Lucida Sans Unicode', 'Lucida Grande', 'Lucida Sans', Arial, sans-serif\"><strong style=\"box-sizing:border-box;user-select:text;scrollbar-width:thin;scrollbar-color:var(--color-scrollbar) var(--color-scrollbar-track)\">Hindered</strong> - Disadvantage on roll</span></p><blockquote style=\"box-sizing:border-box;user-select:text;scrollbar-width:thin;scrollbar-color:var(--color-scrollbar) var(--color-scrollbar-track);margin:0.5em 0px 0.5em 10px;padding:0px 0px 0px 20px;border-left:3px solid var(--color-border-light-tertiary);font-style:italic;color:rgb(25, 24, 19);font-family:'Trebuchet MS', 'Lucida Sans Unicode', 'Lucida Grande', 'Lucida Sans', Arial, sans-serif;font-size:14px;font-variant-ligatures:normal;font-variant-caps:normal;font-weight:400;letter-spacing:normal;orphans:2;text-align:start;text-indent:0px;text-transform:none;widows:2;word-spacing:0px;-webkit-text-stroke-width:0px;white-space:normal;text-decoration-thickness:initial;text-decoration-style:initial;text-decoration-color:initial\"><p style=\"box-sizing:border-box;user-select:text;scrollbar-width:thin;scrollbar-color:var(--color-scrollbar) var(--color-scrollbar-track);margin:0.5em 0px\"><span style=\"font-family:'Trebuchet MS', 'Lucida Sans Unicode', 'Lucida Grande', 'Lucida Sans', Arial, sans-serif\"><em style=\"box-sizing:border-box;user-select:text;scrollbar-width:thin;scrollbar-color:var(--color-scrollbar) var(--color-scrollbar-track);font-style:normal\"><code style=\"box-sizing:border-box;user-select:text;scrollbar-width:thin;scrollbar-color:var(--color-scrollbar) var(--color-scrollbar-track)\">\"value\": 1,</code></em></span></p><p style=\"box-sizing:border-box;user-select:text;scrollbar-width:thin;scrollbar-color:var(--color-scrollbar) var(--color-scrollbar-track);margin:0.5em 0px\"><span style=\"font-family:'Trebuchet MS', 'Lucida Sans Unicode', 'Lucida Grande', 'Lucida Sans', Arial, sans-serif\"><em style=\"box-sizing:border-box;user-select:text;scrollbar-width:thin;scrollbar-color:var(--color-scrollbar) var(--color-scrollbar-track);font-style:normal\"><code style=\"box-sizing:border-box;user-select:text;scrollbar-width:thin;scrollbar-color:var(--color-scrollbar) var(--color-scrollbar-track)\">\"type\": \"dis\",</code></em></span></p><p style=\"box-sizing:border-box;user-select:text;scrollbar-width:thin;scrollbar-color:var(--color-scrollbar) var(--color-scrollbar-track);margin:0.5em 0px\"><span style=\"font-family:'Trebuchet MS', 'Lucida Sans Unicode', 'Lucida Grande', 'Lucida Sans', Arial, sans-serif\"><em style=\"box-sizing:border-box;user-select:text;scrollbar-width:thin;scrollbar-color:var(--color-scrollbar) var(--color-scrollbar-track);font-style:normal\"><code style=\"box-sizing:border-box;user-select:text;scrollbar-width:thin;scrollbar-color:var(--color-scrollbar) var(--color-scrollbar-track)\">\"label\": \"Hindered\"</code></em></span></p></blockquote><p></p><p><strong>Stunned</strong> - Automatically fail Agility, Might and Physical Saves</p><blockquote style=\"box-sizing:border-box;user-select:text;scrollbar-width:thin;scrollbar-color:var(--color-scrollbar) var(--color-scrollbar-track);margin:0.5em 0px 0.5em 10px;padding:0px 0px 0px 20px;border-left:3px solid var(--color-border-light-tertiary);font-style:italic;color:rgb(25, 24, 19);font-family:'Trebuchet MS', 'Lucida Sans Unicode', 'Lucida Grande', 'Lucida Sans', Arial, sans-serif;font-size:14px;font-variant-ligatures:normal;font-variant-caps:normal;font-weight:400;letter-spacing:normal;orphans:2;text-align:start;text-indent:0px;text-transform:none;widows:2;word-spacing:0px;-webkit-text-stroke-width:0px;white-space:normal;text-decoration-thickness:initial;text-decoration-style:initial;text-decoration-color:initial\"><p style=\"box-sizing:border-box;user-select:text;scrollbar-width:thin;scrollbar-color:var(--color-scrollbar) var(--color-scrollbar-track);margin:0.5em 0px\"><span style=\"font-family:'Trebuchet MS', 'Lucida Sans Unicode', 'Lucida Grande', 'Lucida Sans', Arial, sans-serif\"><em style=\"box-sizing:border-box;user-select:text;scrollbar-width:thin;scrollbar-color:var(--color-scrollbar) var(--color-scrollbar-track);font-style:normal\"><code style=\"box-sizing:border-box;user-select:text;scrollbar-width:thin;scrollbar-color:var(--color-scrollbar) var(--color-scrollbar-track)\">\"label\": \"Stunned\",</code></em></span></p><p style=\"box-sizing:border-box;user-select:text;scrollbar-width:thin;scrollbar-color:var(--color-scrollbar) var(--color-scrollbar-track);margin:0.5em 0px\"><span style=\"font-family:'Trebuchet MS', 'Lucida Sans Unicode', 'Lucida Grande', 'Lucida Sans', Arial, sans-serif\"><em style=\"box-sizing:border-box;user-select:text;scrollbar-width:thin;scrollbar-color:var(--color-scrollbar) var(--color-scrollbar-track);font-style:normal\"><code style=\"box-sizing:border-box;user-select:text;scrollbar-width:thin;scrollbar-color:var(--color-scrollbar) var(--color-scrollbar-track)\">\"autoFail\": true</code></em></span></p></blockquote><p></p><p><strong>Hunter's Mark</strong> - Advantage on <span style=\"font-family:'Trebuchet MS', 'Lucida Sans Unicode', 'Lucida Grande', 'Lucida Sans', Arial, sans-serif\">Attack Checks (</span><code style=\"box-sizing:border-box;user-select:text;scrollbar-width:thin;scrollbar-color:var(--color-scrollbar) var(--color-scrollbar-track);color:rgb(25, 24, 19);font-size:14px;font-style:normal;font-variant-ligatures:normal;font-variant-caps:normal;font-weight:400;letter-spacing:normal;orphans:2;text-align:start;text-indent:0px;text-transform:none;widows:2;word-spacing:0px;-webkit-text-stroke-width:0px;white-space:normal;text-decoration-thickness:initial;text-decoration-style:initial;text-decoration-color:initial\">#SPEAKER_ID#</code><span style=\"font-family:'Trebuchet MS', 'Lucida Sans Unicode', 'Lucida Grande', 'Lucida Sans', Arial, sans-serif\"> is explained in Effect Formula Injection chapter).</span></p><blockquote style=\"box-sizing:border-box;user-select:text;scrollbar-width:thin;scrollbar-color:var(--color-scrollbar) var(--color-scrollbar-track);margin:0.5em 0px 0.5em 10px;padding:0px 0px 0px 20px;border-left:3px solid var(--color-border-light-tertiary);font-style:italic;color:rgb(25, 24, 19);font-family:'Trebuchet MS', 'Lucida Sans Unicode', 'Lucida Grande', 'Lucida Sans', Arial, sans-serif;font-size:14px;font-variant-ligatures:normal;font-variant-caps:normal;font-weight:400;letter-spacing:normal;orphans:2;text-align:start;text-indent:0px;text-transform:none;widows:2;word-spacing:0px;-webkit-text-stroke-width:0px;white-space:normal;text-decoration-thickness:initial;text-decoration-style:initial;text-decoration-color:initial\"><p style=\"box-sizing:border-box;user-select:text;scrollbar-width:thin;scrollbar-color:var(--color-scrollbar) var(--color-scrollbar-track);margin:0.5em 0px\"><span style=\"font-family:'Trebuchet MS', 'Lucida Sans Unicode', 'Lucida Grande', 'Lucida Sans', Arial, sans-serif\"><em style=\"box-sizing:border-box;user-select:text;scrollbar-width:thin;scrollbar-color:var(--color-scrollbar) var(--color-scrollbar-track);font-style:normal\"><code style=\"box-sizing:border-box;user-select:text;scrollbar-width:thin;scrollbar-color:var(--color-scrollbar) var(--color-scrollbar-track)\">\"value\": 1,</code></em></span></p><p style=\"box-sizing:border-box;user-select:text;scrollbar-width:thin;scrollbar-color:var(--color-scrollbar) var(--color-scrollbar-track);margin:0.5em 0px\"><span style=\"font-family:'Trebuchet MS', 'Lucida Sans Unicode', 'Lucida Grande', 'Lucida Sans', Arial, sans-serif\"><em style=\"box-sizing:border-box;user-select:text;scrollbar-width:thin;scrollbar-color:var(--color-scrollbar) var(--color-scrollbar-track);font-style:normal\"><code style=\"box-sizing:border-box;user-select:text;scrollbar-width:thin;scrollbar-color:var(--color-scrollbar) var(--color-scrollbar-track)\">\"type\": \"adv\",</code></em></span></p><p style=\"box-sizing:border-box;user-select:text;scrollbar-width:thin;scrollbar-color:var(--color-scrollbar) var(--color-scrollbar-track);margin:0.5em 0px\"><span style=\"font-family:'Trebuchet MS', 'Lucida Sans Unicode', 'Lucida Grande', 'Lucida Sans', Arial, sans-serif\"><em style=\"box-sizing:border-box;user-select:text;scrollbar-width:thin;scrollbar-color:var(--color-scrollbar) var(--color-scrollbar-track);font-style:normal\"><code style=\"box-sizing:border-box;user-select:text;scrollbar-width:thin;scrollbar-color:var(--color-scrollbar) var(--color-scrollbar-track)\">\"label\": \"Hunter’s Mark\",</code></em></span></p><p style=\"box-sizing:border-box;user-select:text;scrollbar-width:thin;scrollbar-color:var(--color-scrollbar) var(--color-scrollbar-track);margin:0.5em 0px\"><span style=\"font-family:'Trebuchet MS', 'Lucida Sans Unicode', 'Lucida Grande', 'Lucida Sans', Arial, sans-serif\"><em style=\"box-sizing:border-box;user-select:text;scrollbar-width:thin;scrollbar-color:var(--color-scrollbar) var(--color-scrollbar-track);font-style:normal\"><code style=\"box-sizing:border-box;user-select:text;scrollbar-width:thin;scrollbar-color:var(--color-scrollbar) var(--color-scrollbar-track)\">\"applyOnlyForId\": \"#SPEAKER_ID#\"</code></em></span></p></blockquote><p></p><p><strong>Aware</strong> - Advantage on Awarenes Checks</p><blockquote style=\"box-sizing:border-box;user-select:text;scrollbar-width:thin;scrollbar-color:var(--color-scrollbar) var(--color-scrollbar-track);margin:0.5em 0px 0.5em 10px;padding:0px 0px 0px 20px;border-left:3px solid var(--color-border-light-tertiary);font-style:italic;color:rgb(25, 24, 19);font-family:'Trebuchet MS', 'Lucida Sans Unicode', 'Lucida Grande', 'Lucida Sans', Arial, sans-serif;font-size:14px;font-variant-ligatures:normal;font-variant-caps:normal;font-weight:400;letter-spacing:normal;orphans:2;text-align:start;text-indent:0px;text-transform:none;widows:2;word-spacing:0px;-webkit-text-stroke-width:0px;white-space:normal;text-decoration-thickness:initial;text-decoration-style:initial;text-decoration-color:initial\"><p style=\"box-sizing:border-box;user-select:text;scrollbar-width:thin;scrollbar-color:var(--color-scrollbar) var(--color-scrollbar-track);margin:0.5em 0px\"><span style=\"font-family:'Trebuchet MS', 'Lucida Sans Unicode', 'Lucida Grande', 'Lucida Sans', Arial, sans-serif\"><em style=\"box-sizing:border-box;user-select:text;scrollbar-width:thin;scrollbar-color:var(--color-scrollbar) var(--color-scrollbar-track);font-style:normal\"><code style=\"box-sizing:border-box;user-select:text;scrollbar-width:thin;scrollbar-color:var(--color-scrollbar) var(--color-scrollbar-track)\">\"value\": 1,</code></em></span></p><p style=\"box-sizing:border-box;user-select:text;scrollbar-width:thin;scrollbar-color:var(--color-scrollbar) var(--color-scrollbar-track);margin:0.5em 0px\"><span style=\"font-family:'Trebuchet MS', 'Lucida Sans Unicode', 'Lucida Grande', 'Lucida Sans', Arial, sans-serif\"><em style=\"box-sizing:border-box;user-select:text;scrollbar-width:thin;scrollbar-color:var(--color-scrollbar) var(--color-scrollbar-track);font-style:normal\"><code style=\"box-sizing:border-box;user-select:text;scrollbar-width:thin;scrollbar-color:var(--color-scrollbar) var(--color-scrollbar-track)\">\"type\": \"adv\",</code></em></span></p><p style=\"box-sizing:border-box;user-select:text;scrollbar-width:thin;scrollbar-color:var(--color-scrollbar) var(--color-scrollbar-track);margin:0.5em 0px\"><span style=\"font-family:'Trebuchet MS', 'Lucida Sans Unicode', 'Lucida Grande', 'Lucida Sans', Arial, sans-serif\"><em style=\"box-sizing:border-box;user-select:text;scrollbar-width:thin;scrollbar-color:var(--color-scrollbar) var(--color-scrollbar-track);font-style:normal\"><code style=\"box-sizing:border-box;user-select:text;scrollbar-width:thin;scrollbar-color:var(--color-scrollbar) var(--color-scrollbar-track)\">\"label\": \"Aware\",</code></em></span></p><p style=\"box-sizing:border-box;user-select:text;scrollbar-width:thin;scrollbar-color:var(--color-scrollbar) var(--color-scrollbar-track);margin:0.5em 0px\"><span style=\"font-family:'Trebuchet MS', 'Lucida Sans Unicode', 'Lucida Grande', 'Lucida Sans', Arial, sans-serif\"><em style=\"box-sizing:border-box;user-select:text;scrollbar-width:thin;scrollbar-color:var(--color-scrollbar) var(--color-scrollbar-track);font-style:normal\"><code style=\"box-sizing:border-box;user-select:text;scrollbar-width:thin;scrollbar-color:var(--color-scrollbar) var(--color-scrollbar-track)\">\"skill\": \"awa\"</code></em></span></p></blockquote>"
      },
      "video": {
        "controls": true,
        "volume": 0.5
      },
      "src": null,
      "ownership": {
        "default": -1,
        "dOcXwrUs2VunZl0y": 3
      },
      "flags": {},
      "_stats": {
        "compendiumSource": null,
        "duplicateSource": null,
        "coreVersion": "12.331",
        "systemId": "dc20rpg",
        "systemVersion": "0.8.3",
        "createdTime": 1731711785165,
        "modifiedTime": 1734423577780,
        "lastModifiedBy": "dOcXwrUs2VunZl0y"
      },
      "_key": "!journal.pages!YOpY3bGZlNzCPy9F.wKxuEHEETlYPwZcH"
    },
    {
      "sort": 700000,
      "name": "Effect Formula Injection",
      "type": "text",
      "_id": "OrCVUc2TJ5JEOfet",
      "system": {},
      "title": {
        "show": true,
        "level": 1
      },
      "image": {},
      "text": {
        "format": 1,
        "content": "<p>Effects can be injected with formula, which means that instead of a specific value, we can provide a formula from which this value will be calculated in the runetime.</p><p></p><p>There are two types of injection:</p><ul><li><p><strong>ON_PREPARE</strong></p><ul><li><p>the injected formulas will be calculated when preparing the actor</p></li><li><p>the formula is surrounded by &lt;: and :&gt;</p></li><li><p>is calculated before all actor fields are prepared, so some of them may not exist or be calculated yet</p></li></ul></li><li><p><strong>ON_CHAT_MESSAGE</strong></p><ul><li><p>the injected formulas will be calculated when applying the effect from the chat message</p></li><li><p>the formula is surrounded by &lt;# and #&gt;</p></li><li><p>has access to <strong>#SPEAKER_ID#</strong> constant that replaces itself with id of an actor that created that chat message (see Roll Level and Events for examples)</p></li><li><p>has access to full speaker rollData, so there is no risk of miscalculations</p></li></ul></li></ul><p></p><h3>Examples</h3><ul><li><p><strong>\"value\": &lt;:@prime:&gt;</strong> - value of healing/damage will be equal to actor's prime</p></li><li><p><strong>\"against\": &lt;#@saveDC.value.spell#&gt;</strong> - spell save DC of the actor creating chat message will be the against value</p></li><li><p><strong>\"applyOnlyForId\": \"#SPEAKER_ID#\"</strong> - id of the actor creating chat message will repleace <strong>#SPEAKER_ID#</strong></p></li></ul>"
      },
      "video": {
        "controls": true,
        "volume": 0.5
      },
      "src": null,
      "ownership": {
        "default": -1,
        "dOcXwrUs2VunZl0y": 3
      },
      "flags": {},
      "_stats": {
        "compendiumSource": null,
        "duplicateSource": null,
        "coreVersion": "12.331",
        "systemId": "dc20rpg",
        "systemVersion": "0.8.3",
        "createdTime": 1733230314782,
        "modifiedTime": 1733929775214,
        "lastModifiedBy": "dOcXwrUs2VunZl0y"
      },
      "_key": "!journal.pages!YOpY3bGZlNzCPy9F.OrCVUc2TJ5JEOfet"
    },
    {
      "sort": 800000,
      "name": "Item Macro",
      "type": "text",
      "_id": "kZg925MkUu8o4W11",
      "system": {},
      "title": {
        "show": true,
        "level": 1
      },
      "image": {},
      "text": {
        "format": 1,
        "content": "<p>Item macro allows you to add macros to items that will be runned at different times when the application is running.</p><p>Every Item Macro has access to the basic macro fields as well as to:</p><ul><li><p><strong>item</strong> - the item that calls that macro </p></li><li><p><strong>actor</strong> - the actor that owns item calling that macro.</p></li></ul><p></p><h3 data-anchor=\"event-types\" style=\"box-sizing:border-box;user-select:text;scrollbar-width:thin;scrollbar-color:var(--color-scrollbar) var(--color-scrollbar-track);margin:1rem 0px 0.5rem;padding:0px;font-weight:normal;font-size:1.25em;border-bottom:1px solid var(--color-underline-header);color:rgb(25, 24, 19);font-family:'Trebuchet MS', 'Lucida Sans Unicode', 'Lucida Grande', 'Lucida Sans', Arial, sans-serif;font-style:normal;font-variant-ligatures:normal;font-variant-caps:normal;letter-spacing:normal;orphans:2;text-align:start;text-indent:0px;text-transform:none;widows:2;word-spacing:0px;-webkit-text-stroke-width:0px;white-space:normal;text-decoration-thickness:initial;text-decoration-style:initial;text-decoration-color:initial\"><span style=\"font-family:'Trebuchet MS', 'Lucida Sans Unicode', 'Lucida Grande', 'Lucida Sans', Arial, sans-serif\">Item Macro Types</span></h3><ul><li><p><strong>onDemand</strong> - The user can call this macro whenever he wants</p></li><li><p><strong>onCreate</strong> - Called right after the item creation</p></li><li><p><strong>preDelete</strong> - Called before the item deletion</p></li><li><p><strong>preItemRoll</strong> - Called before the item is rolled</p><ul><li><p>Can set <strong>item.doNotSendToChat</strong> flag (if true it will suppress chat message creation)</p></li></ul></li><li><p><strong>postItemRoll</strong> - Called after the item is rolled</p><ul><li><p>Has access to additional field: <strong>rolls</strong> - object containting all evaulated rolls</p></li><li><p>Can set <strong>item.doNotSendToChat</strong> flag (if true it will suppress chat message creation)</p></li></ul></li><li><p><strong>onItemToggle</strong> - Called when the item toggled on or off</p><ul><li><p>Has access to additional fields: <strong>on</strong> and <strong>off</strong> - allows to check if object was toggled on or off</p></li></ul></li></ul><p></p><p></p>"
      },
      "video": {
        "controls": true,
        "volume": 0.5
      },
      "src": null,
      "ownership": {
        "default": -1,
        "dOcXwrUs2VunZl0y": 3
      },
      "flags": {},
      "_stats": {
        "compendiumSource": null,
        "duplicateSource": null,
        "coreVersion": "12.331",
        "systemId": "dc20rpg",
        "systemVersion": "0.8.3",
        "createdTime": 1733929845760,
        "modifiedTime": 1733930729615,
        "lastModifiedBy": "dOcXwrUs2VunZl0y"
      },
      "_key": "!journal.pages!YOpY3bGZlNzCPy9F.kZg925MkUu8o4W11"
    }
  ],
  "folder": null,
  "flags": {},
  "_stats": {
    "compendiumSource": null,
    "duplicateSource": null,
    "coreVersion": "12.331",
    "systemId": "dc20rpg",
    "systemVersion": "0.8.2",
    "createdTime": 1725288599064,
    "modifiedTime": 1725288599064,
    "lastModifiedBy": "dOcXwrUs2VunZl0y"
  },
  "_id": "YOpY3bGZlNzCPy9F",
  "sort": 0,
  "ownership": {
    "default": 0,
    "dOcXwrUs2VunZl0y": 3
  },
  "_key": "!journal!YOpY3bGZlNzCPy9F"
}
