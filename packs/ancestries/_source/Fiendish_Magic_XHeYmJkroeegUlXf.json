{
  "folder": "6mIFDcv8HNFiTdQU",
  "name": "Fiendish Magic",
  "type": "feature",
  "img": "icons/magic/unholy/projectile-smoke-trail-pink.webp",
  "system": {
    "description": "<p>You learn 1 Spell of your choice from the Arcane Spell List from the Destruction or Enchantment Spell Schools. If the Spell deals damage, then it must be the same damage type as your <strong>Fiendish</strong> damage.</p><p>Once per <strong>LR</strong>, you can cast the chosen Spell spending 1 less<strong> MP</strong> than normal (minimum of<strong> 0 MP</strong>).</p><p>The Spells total <strong>MP </strong>cost (before all reductions) still cannot exceed your <strong>Mana Spend Limit</strong>.</p>",
    "tableName": "",
    "source": "",
    "conditional": {
      "hasConditional": false,
      "condition": "",
      "bonus": 0,
      "useFor": "",
      "name": "",
      "connectedToEffects": false
    },
    "isReaction": false,
    "actionType": "",
    "attackFormula": {
      "rangeType": "melee",
      "checkType": "attack",
      "targetDefence": "precision",
      "rollBonus": 0,
      "combatMastery": true,
      "critThreshold": 20,
      "formulaMod": "",
      "halfDmgOnMiss": false
    },
    "duration": {
      "value": null,
      "type": "",
      "timeUnit": ""
    },
    "range": {
      "normal": null,
      "max": null,
      "unit": ""
    },
    "target": {
      "count": null,
      "invidual": true,
      "type": "",
      "areas": {
        "default": {
          "area": "",
          "distance": null,
          "width": null,
          "unit": "",
          "difficult": ""
        }
      },
      "area": "",
      "distance": null,
      "unit": "",
      "width": null
    },
    "check": {
      "canCrit": false,
      "checkKey": "att",
      "contestedKey": "phy",
      "checkDC": 10,
      "failEffect": ""
    },
    "formulas": {},
    "enhancements": {
      "RkXPOoVRpvSZKUkJ": {
        "name": "Fiendish Magic",
        "number": 0,
        "resources": {
          "actionPoint": null,
          "health": null,
          "mana": -1,
          "stamina": null,
          "custom": {},
          "grit": null,
          "restPoints": null
        },
        "charges": {
          "consume": true,
          "fromOriginal": true,
          "originalId": "XHeYmJkroeegUlXf"
        },
        "modifications": {
          "hasAdditionalFormula": false,
          "additionalFormula": "",
          "addsNewFormula": false,
          "formula": {
            "formula": "",
            "type": "",
            "category": "damage"
          },
          "overrideDamageType": false,
          "damageType": "",
          "addsNewRollRequest": false,
          "rollRequest": {
            "category": "save",
            "saveKey": "",
            "contestedKey": "",
            "dcCalculation": "martial",
            "dc": 0,
            "addMasteryToDC": false,
            "respectSizeRules": false
          },
          "rollLevelChange": false,
          "rollLevel": {
            "type": "adv",
            "value": 1
          },
          "addsRange": false,
          "bonusRange": {
            "melee": null,
            "normal": null,
            "max": null
          }
        },
        "description": "<p><span style=\"font-family: 'Trebuchet MS', 'Lucida Sans Unicode', 'Lucida Grande', 'Lucida Sans', Arial, sans-serif\">Once per <strong style=\"box-sizing: border-box; user-select: text; scrollbar-width: thin; scrollbar-color: var(--color-scrollbar) var(--color-scrollbar-track);\">LR</strong>, you can cast the chosen Spell spending 1 less<strong style=\"box-sizing: border-box; user-select: text; scrollbar-width: thin; scrollbar-color: var(--color-scrollbar) var(--color-scrollbar-track);\"> MP</strong> than normal (minimum of<strong style=\"box-sizing: border-box; user-select: text; scrollbar-width: thin; scrollbar-color: var(--color-scrollbar) var(--color-scrollbar-track);\"> 0</strong> <strong style=\"box-sizing: border-box; user-select: text; scrollbar-width: thin; scrollbar-color: var(--color-scrollbar) var(--color-scrollbar-track);\">MP</strong>).</span></p><p style=\"box-sizing: border-box; user-select: text; scrollbar-width: thin; scrollbar-color: var(--color-scrollbar) var(--color-scrollbar-track); margin: 0.5em 0px; color: rgb(25, 24, 19); font-family: 'Trebuchet MS', 'Lucida Sans Unicode', 'Lucida Grande', 'Lucida Sans', Arial, sans-serif; font-size: 14px; font-style: normal; font-variant-ligatures: normal; font-variant-caps: normal; font-weight: 400; letter-spacing: normal; orphans: 2; text-indent: 0px; text-transform: none; widows: 2; word-spacing: 0px; -webkit-text-stroke-width: 0px; white-space: normal; text-decoration-thickness: initial; text-decoration-style: initial; text-decoration-color: initial; text-align: start\"><span style=\"font-family: 'Trebuchet MS', 'Lucida Sans Unicode', 'Lucida Grande', 'Lucida Sans', Arial, sans-serif\">The Spells total <strong style=\"box-sizing: border-box; user-select: text; scrollbar-width: thin; scrollbar-color: var(--color-scrollbar) var(--color-scrollbar-track);\">MP </strong>cost (before all reductions) still cannot exceed your <strong style=\"box-sizing: border-box; user-select: text; scrollbar-width: thin; scrollbar-color: var(--color-scrollbar) var(--color-scrollbar-track);\">Mana Spend Limit</strong>.</span></p>"
      }
    },
    "copyEnhancements": {
      "copy": true,
      "copyFor": "name=\"SELECTED SPELL NAME\""
    },
    "save": {
      "type": "phy",
      "dc": null,
      "calculationKey": "spell",
      "addMastery": false,
      "failEffect": ""
    },
    "costs": {
      "resources": {
        "actionPoint": null,
        "stamina": null,
        "mana": null,
        "health": null,
        "custom": {}
      },
      "charges": {
        "current": 1,
        "max": null,
        "maxChargesFormula": "1",
        "overriden": false,
        "rechargeFormula": "",
        "reset": "long",
        "showAsResource": false
      },
      "otherItem": {
        "itemId": "",
        "amountConsumed": 0,
        "consumeCharge": true
      }
    },
    "featureType": "ancestry",
    "featureOrigin": "Fiendborn",
    "usesWeapon": {
      "weaponId": "",
      "weaponAttack": false
    },
    "effectsConfig": {
      "toggleable": false,
      "active": false,
      "addToChat": false
    },
    "isResource": false,
    "resource": {
      "name": "",
      "resourceKey": "key",
      "reset": "",
      "values": [
        0,
        0,
        0,
        0,
        0,
        0,
        0,
        0,
        0,
        0,
        0,
        0,
        0,
        0,
        0,
        0,
        0,
        0,
        0,
        0
      ]
    },
    "choicePointCost": 2,
    "hasAdvancement": true,
    "advancements": {
      "default": {
        "name": "Fiendish Magic",
        "allowToAddItems": true,
        "customTitle": "Fiendish Magic - You learn 1 Spell from the Arcane Spell List from the Destruction or Enchantment Spell Schools",
        "items": {},
        "addItemsOptions": {
          "itemLimit": 1,
          "itemType": "spell",
          "helpText": "Add Fiendish Magic Spell"
        },
        "macro": "if (!advancement.items) {\n  ui.notifications.error(\"Fiendish Magic Spell not found - Add it manually by running Macro\");\n  return;\n}\nconst items = Object.values(advancement.items);\nconst spell = items[0];\n\nif (!spell) {\n  ui.notifications.error(\"Fiendish Magic Spell not found - Add it manually by running Macro\");\n}\nelse {\n  const fiendishMagic = actor.items.find(item => item.system.itemKey === \"fiendishMagic\");\n  if (fiendishMagic) fiendishMagic.update({[\"system.copyEnhancements.copyFor\"]: `id=\"${spell.createdItemId}\"`});\n}"
      }
    },
    "macros": {
      "gswH3bkqZ9LB8sU1": {
        "name": "Change Fiendish Magic Spell",
        "trigger": "onDemand",
        "command": "const options = {}\nactor.items.forEach(item => {\n  if (item.type === \"spell\") options[item.id] = item.name;\n});\n\nconst spellId = await game.dc20rpg.tools.getSimplePopup(\"select\", {header: \"Select Fiendish Magic Spell\", selectOptions: options});\nif (spellId) {\n  item.update({[\"system.copyEnhancements.copyFor\"]: `id=\"${spellId}\"`});\n}",
        "disabled": false,
        "title": "Change Fiendish Magic Spell"
      }
    },
    "itemKey": "fiendishMagic",
    "featureSourceItem": "fiendborn",
    "requirements": {
      "level": 0
    }
  },
  "effects": [
    {
      "img": "icons/magic/unholy/projectile-smoke-trail-pink.webp",
      "origin": "Compendium.dc20rpg.ancestries.Item.NKuUuUyr0TkwO37A",
      "duration": {
        "rounds": null,
        "startTime": null,
        "seconds": null,
        "combat": null,
        "turns": null,
        "startRound": null,
        "startTurn": null
      },
      "disabled": false,
      "name": "Fiendish Magic",
      "_id": "lbMV6qc0y7CBNwPP",
      "type": "base",
      "system": {
        "statusId": "",
        "disableWhen": {
          "mode": "=="
        }
      },
      "changes": [
        {
          "key": "system.known.spells.max",
          "mode": 2,
          "value": "1",
          "priority": null
        }
      ],
      "description": "<p><span>You learn 1 Spell of your choice from the Arcane Spell List from the Destruction or Enchantment Spell Schools. If the Spell deals damage, then it must be the same damage type as your <strong>Fiendish</strong> damage.</span></p>",
      "tint": "#ffffff",
      "transfer": true,
      "statuses": [],
      "sort": 0,
      "flags": {
        "dc20rpg": {
          "disableWhen": {
            "path": "",
            "mode": "==",
            "value": ""
          },
          "requireEnhancement": ""
        }
      },
      "_stats": {
        "compendiumSource": "Compendium.dc20rpg.ancestries.Item.NKuUuUyr0TkwO37A.ActiveEffect.vAZ5tIfdsRX8eS0h",
        "duplicateSource": null,
        "coreVersion": "13.344",
        "systemId": "dc20rpg",
        "systemVersion": "0.9.6.0",
        "createdTime": 1734300988845,
        "modifiedTime": 1750880257394,
        "lastModifiedBy": "dOcXwrUs2VunZl0y",
        "exportSource": null
      },
      "_key": "!items.effects!XHeYmJkroeegUlXf.lbMV6qc0y7CBNwPP"
    }
  ],
  "sort": 200000,
  "ownership": {
    "default": 0,
    "dOcXwrUs2VunZl0y": 3
  },
  "flags": {},
  "_stats": {
    "compendiumSource": "Item.NKuUuUyr0TkwO37A",
    "duplicateSource": "Item.NKuUuUyr0TkwO37A",
    "coreVersion": "13.344",
    "systemId": "dc20rpg",
    "systemVersion": "0.9.7.0",
    "createdTime": 1720100284317,
    "modifiedTime": 1751135758727,
    "lastModifiedBy": "dOcXwrUs2VunZl0y",
    "exportSource": null
  },
  "_id": "XHeYmJkroeegUlXf",
  "_key": "!items!XHeYmJkroeegUlXf"
}
