<form id="actor-request" class="dialog-v13 dialog-content standard-form {{cssClass}}">
  <h4 class="divider">{{#if requestSent}}{{requestSent}}{{else}}{{localize "dc20rpg.dialog.actorRequest.selectActors"}}{{/if}}</h4>
  
  {{!-- Actor Select --}}
  {{#if hasActors}}
  <fieldset class="actor-wrapper scrollable">
    {{#each selectableActors as |wrapper actorId|}}
    <div class="actor {{#if wrapper.selectable}}selectable{{/if}} {{#if wrapper.selected}}selected{{/if}}" 
      {{#if wrapper.selectable}}data-cType="activable" data-path="selectableActors.{{actorId}}.selected"{{/if}}
    >
      {{#if wrapper.result}}<div class="roll-result-wrapper {{wrapper.outcome}}"><span class="roll-result" data-tooltip="{{localize "dc20rpg.dialog.actorRequest.rollResult"}}">{{wrapper.result}}</span></div>{{/if}}
      {{#if wrapper.request}} <div class="roll-result-wrapper awaiting-result"><span class="roll-result" data-tooltip="{{localize "dc20rpg.dialog.actorRequest.awaitingResult"}}"><i class="fa-light fa-dice-d20 fa-lg dice-roll"></i></div></span>{{/if}}
      <img src="{{wrapper.actor.img}}"/>
      <input disabled value="{{wrapper.actor.name}}"/>
    </div>
    {{/each}}
  </fieldset>
  {{else}}
  <fieldset class="actor-wrapper">
    <span class="no-actor">{{localize "dc20rpg.dialog.actorRequest.noPlayer"}}</span>
  </fieldset>
  {{/if}}
  </div>

  {{#if showRollModification}}
  <fieldset>
    <legend>{{localize "dc20rpg.dialog.actorRequest.rollModification"}}</legend>
    
    <div class="form-group">
      <label>{{localize 'dc20rpg.dialog.actorRequest.rollLevel'}}</label>
      <div class="form-fields">
        <label>{{localize "dc20rpg.dialog.actorRequest.advantage"}}</label>
        <input type="number" data-path="rollOptions.rollLevel.adv" value="{{rollOptions.rollLevel.adv}}" data-max="9" data-cType="numeric"/>
        <label>{{localize "dc20rpg.dialog.actorRequest.disadvantage"}}</label>
        <input type="number" data-path="rollOptions.rollLevel.dis" value="{{rollOptions.rollLevel.dis}}" data-max="9" data-cType="numeric"/>
      </div>
    </div>

    <div class="form-group">
      <label>{{localize 'dc20rpg.dialog.actorRequest.rollDC'}}</label>
      <input type="number" data-path="rollOptions.rollDC" value="{{rollOptions.rollDC}}" data-cType="numeric-nullable"/>
    </div>

    <div class="form-group">
      <label>{{localize 'dc20rpg.dialog.actorRequest.rollMode'}}</label>
      <select data-cType="string" data-path="rollOptions.rollMode">
        {{selectOptions rollModes selected=rollOptions.rollMode blank=""}}
      </select>
    </div>
  </fieldset>
  {{/if}}

  {{#unless showCloseButton}}
  <h4 class="divider">{{header}}</h4>
  {{!-- Select Roll --}}
  <div class="select-wrapper" style="grid-template-columns: {{grid}};">
    {{#if showBasic}}
    <div class="select-column scrollable" style="max-height: 300px;">
      {{!-- Rest --}}
      {{#if selectOptions.rest}}
      <fieldset>
        <legend>{{localize "dc20rpg.dialog.rollSelect.rest"}}</legend>
        {{#each selectOptions.rest as |name key|}}
        <button class="option" data-action="confirm" data-key="{{key}}" data-type="rest">{{name}}</button>
        {{/each}}
      </fieldset>
      {{/if}}

      {{!-- Basic --}}
      {{#if selectOptions.basic}}
      <fieldset>
        <legend>{{localize "dc20rpg.dialog.rollSelect.basic"}}</legend>
        {{#each selectOptions.basic as |name key|}}
        <button class="option" data-action="confirm" data-key="{{key}}" data-type="check">{{name}}</button>
        {{/each}}
      </fieldset>
      {{/if}}

      {{!-- Save --}}
      {{#if selectOptions.save}}
      <fieldset>
        <legend>{{localize "dc20rpg.dialog.rollSelect.save"}}</legend>
        {{#each selectOptions.save as |name key|}}
        <button class="option" data-action="confirm" data-key="{{key}}" data-type="save">{{name}}</button>
        {{/each}}
      </fieldset>
      {{/if}}

      {{!-- Attribute Check --}}
      {{#if selectOptions.attribute}}
      <fieldset>
        <legend>{{localize "dc20rpg.dialog.rollSelect.attribute"}}</legend>
        {{#each selectOptions.attribute as |name key|}}
        <button class="option" data-action="confirm" data-key="{{key}}" data-type="check">{{name}}</button>
        {{/each}}
      </fieldset>
      {{/if}}
    </div>
    {{/if}}

    {{!-- Skills --}}
    {{#if showSkill}}
    <div class="select-column scrollable" style="max-height: 300px;">
      
      {{!-- Skill Check --}}
      {{#if selectOptions.skill}}
      <fieldset>
        <legend>{{localize "dc20rpg.dialog.rollSelect.skill"}}</legend>
        {{#each selectOptions.skill as |name key|}}
        <button class="option" data-action="confirm" data-key="{{key}}" data-type="check">{{name}}</button>
        {{/each}}
      </fieldset>
      {{/if}}

      {{!-- Trade Check --}}
      {{#if selectOptions.trade}}
      <fieldset>
        <legend>{{localize "dc20rpg.dialog.rollSelect.trade"}}</legend>
        {{#each selectOptions.trade as |name key|}}
        <button class="option" data-action="confirm" data-key="{{key}}" data-type="check">{{name}}</button>
        {{/each}}
      </fieldset>
      {{/if}}

    </div>
    {{/if}}
  </div>
  {{/unless}}

  {{#if showCloseButton}}
  <footer class="form-footer margin-top-5">
    <button class="button" data-action="close"><i class="fa-solid"></i>{{localize "dc20rpg.dialog.actorRequest.close"}}</button>
  </footer>
  {{/if}}
</form>